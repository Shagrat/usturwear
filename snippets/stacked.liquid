{% liquid
	assign image_fit = section.settings.image_fit

	if section.settings.image_ratio != 'adapt'
		assign have_ratio = 'media-ratio'
	else
		assign have_ratio = ''
	endif
%}

<div class="product__media-list__container--large {{ class }}">
	{% liquid
		assign variant_images = product.images | where: 'attached_to_variant?', true | map: 'src'
	%}

	{% if product.selected_or_first_available_variant.featured_media != null %}
		{% assign featured_media = product.selected_or_first_available_variant.featured_media %}
		<div
			class="product__media-item {% if image_fit == 'contain' %} product__media-item--contain{% endif %}"
			data-media-id="{{ section.id }}-{{ featured_media.id }}"
		>
			{% render 'product-thumbnail',
				product_card_product: product,
				media: featured_media,
				position: 'featured',
				modal_id: section.id,
				lazy_load: false,
				have_ratio: have_ratio
			%}
		</div>
	{% endif %}
	{% for media in product.media %}
		{% unless media.id
				== product.selected_or_first_available_variant.featured_media.id
		%}
			<div
				class="product__media-item {% if media.media_type != 'image' %} product__media-item--full{% endif %} {% if variant_images contains media.src %} product__media-item--variant{% endif %} {% if image_fit == 'contain' %} product__media-item--contain{% endif %}"
				data-media-id="{{ section.id }}-{{ media.id }}"
			>
				{% render 'product-thumbnail',
					media: media,
					position: forloop.index,
					modal_id: section.id,
					lazy_load: false,
					have_ratio: have_ratio
				%}
			</div>
		{% endunless %}
	{% endfor %}
</div>
